{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnd/OneDrive/Desktop/Folders/Web%20Dev%20Stuff/CinemaBooker/cinema-booker/src/app/admin/page.tsx"],"sourcesContent":["// src/app/admin/page.tsx\r\n\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useSession } from \"next-auth/react\";\r\n\r\ntype Booking = {\r\n  id: string;\r\n  user: string;\r\n  movie: string;\r\n  showtime: string;\r\n  seats: string;\r\n  total: number;\r\n  status: \"CONFIRMED\" | \"CANCELLED\" | \"PENDING\";\r\n};\r\n\r\ntype ReviewReport = {\r\n  id: string;\r\n  user: string;\r\n  movie: string;\r\n  reason: string;\r\n  submittedAt: string;\r\n};\r\n\r\nexport default function AdminHomePage() {\r\n  const router = useRouter();\r\n  const { data: session, status } = useSession();\r\n\r\n  // minimal client-side admin guard (keep middleware too)\r\n  useEffect(() => {\r\n    if (status !== \"authenticated\") return;\r\n    const role =\r\n      (session?.user as any)?.userType ??\r\n      (session?.user as any)?.role ??\r\n      \"USER\";\r\n    if (role !== \"ADMIN\") router.replace(\"/\");\r\n  }, [status, session, router]);\r\n\r\n  if (status === \"loading\") {\r\n    return (\r\n      <div className=\"min-h-screen bg-neutral-950 text-neutral-200 grid place-items-center\">\r\n        Loading…\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // TODO: replace with real data fetches\r\n  const bookings: Booking[] = [\r\n    {\r\n      id: \"B-9213\",\r\n      user: \"sara@demo.com\",\r\n      movie: \"Oppenheimer\",\r\n      showtime: \"2025-10-26 18:30\",\r\n      seats: \"E11,E12\",\r\n      total: 28.0,\r\n      status: \"CONFIRMED\",\r\n    },\r\n    {\r\n      id: \"B-9212\",\r\n      user: \"mike@demo.com\",\r\n      movie: \"Interstellar\",\r\n      showtime: \"2025-10-26 20:15\",\r\n      seats: \"C7\",\r\n      total: 14.0,\r\n      status: \"PENDING\",\r\n    },\r\n    {\r\n      id: \"B-9211\",\r\n      user: \"nina@demo.com\",\r\n      movie: \"La La Land\",\r\n      showtime: \"2025-10-26 16:00\",\r\n      seats: \"A1,A2,A3\",\r\n      total: 42.0,\r\n      status: \"CANCELLED\",\r\n    },\r\n  ];\r\n\r\n  const reports: ReviewReport[] = [\r\n    {\r\n      id: \"R-1103\",\r\n      user: \"alex@demo.com\",\r\n      movie: \"Get Out\",\r\n      reason: \"Inappropriate language\",\r\n      submittedAt: \"2025-10-26 11:22\",\r\n    },\r\n    {\r\n      id: \"R-1102\",\r\n      user: \"lee@demo.com\",\r\n      movie: \"Superbad\",\r\n      reason: \"Spam / off-topic\",\r\n      submittedAt: \"2025-10-26 09:44\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-neutral-950 text-neutral-200\">\r\n      {/* header */}\r\n      <div className=\"border-b border-neutral-800 bg-neutral-950/95 sticky top-0 z-10\">\r\n        <div className=\"mx-auto max-w-6xl px-4 py-4 flex items-center justify-between\">\r\n          <h1 className=\"text-lg font-semibold\">Admin</h1>\r\n          <div className=\"text-sm text-neutral-400\">\r\n            {(session?.user as any)?.email}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mx-auto max-w-6xl px-4 py-6 space-y-8\">\r\n        {/* bookings */}\r\n        <section>\r\n          <div className=\"mb-3 flex items-center justify-between\">\r\n            <h2 className=\"text-base font-semibold\">Recent bookings</h2>\r\n            <button className=\"text-sm border border-neutral-700 px-3 py-1.5 rounded hover:bg-neutral-900\">\r\n              Refresh\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"overflow-x-auto border border-neutral-800 rounded\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead className=\"bg-neutral-900 text-neutral-300\">\r\n                <tr>\r\n                  <th className=\"px-3 py-2 text-left\">ID</th>\r\n                  <th className=\"px-3 py-2 text-left\">User</th>\r\n                  <th className=\"px-3 py-2 text-left\">Movie</th>\r\n                  <th className=\"px-3 py-2 text-left\">Showtime</th>\r\n                  <th className=\"px-3 py-2 text-left\">Seats</th>\r\n                  <th className=\"px-3 py-2 text-left\">Total</th>\r\n                  <th className=\"px-3 py-2 text-left\">Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {bookings.map((b) => (\r\n                  <tr\r\n                    key={b.id}\r\n                    className=\"border-t border-neutral-800 hover:bg-neutral-900\"\r\n                  >\r\n                    <td className=\"px-3 py-2 font-medium\">{b.id}</td>\r\n                    <td className=\"px-3 py-2\">{b.user}</td>\r\n                    <td className=\"px-3 py-2\">{b.movie}</td>\r\n                    <td className=\"px-3 py-2\">{b.showtime}</td>\r\n                    <td className=\"px-3 py-2\">{b.seats}</td>\r\n                    <td className=\"px-3 py-2\">${b.total.toFixed(2)}</td>\r\n                    <td className=\"px-3 py-2\">\r\n                      <span className={statusBadge(b.status)}>{b.status}</span>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n                {bookings.length === 0 && (\r\n                  <tr>\r\n                    <td\r\n                      colSpan={7}\r\n                      className=\"px-3 py-10 text-center text-neutral-400\"\r\n                    >\r\n                      No bookings to show.\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </section>\r\n\r\n        {/* moderation */}\r\n        <section>\r\n          <div className=\"mb-3 flex items-center justify-between\">\r\n            <h2 className=\"text-base font-semibold\">Moderation queue</h2>\r\n            <a\r\n              href=\"/admin/reports\"\r\n              className=\"text-sm text-neutral-300 hover:underline\"\r\n            >\r\n              View all\r\n            </a>\r\n          </div>\r\n\r\n          <ul className=\"border border-neutral-800 rounded divide-y divide-neutral-800\">\r\n            {reports.map((r) => (\r\n              <li key={r.id} className=\"p-3\">\r\n                <div className=\"flex items-start justify-between gap-3\">\r\n                  <div>\r\n                    <div className=\"font-medium\">{r.movie}</div>\r\n                    <div className=\"text-xs text-neutral-400\">\r\n                      {r.user} • {r.submittedAt}\r\n                    </div>\r\n                    <div className=\"mt-1 text-sm\">{r.reason}</div>\r\n                  </div>\r\n                  <div className=\"flex gap-2\">\r\n                    <button className=\"border border-neutral-700 px-3 py-1.5 rounded hover:bg-neutral-900\">\r\n                      Approve\r\n                    </button>\r\n                    <button className=\"border border-neutral-700 px-3 py-1.5 rounded hover:bg-neutral-900\">\r\n                      Reject\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ))}\r\n            {reports.length === 0 && (\r\n              <li className=\"p-6 text-center text-neutral-400\">\r\n                No reports pending.\r\n              </li>\r\n            )}\r\n          </ul>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\nfunction statusBadge(status: Booking[\"status\"]) {\r\n  const base =\r\n    \"inline-flex items-center rounded px-2 py-0.5 text-xs border\";\r\n  if (status === \"CONFIRMED\")\r\n    return `${base} border-emerald-700 text-emerald-300`;\r\n  if (status === \"PENDING\")\r\n    return `${base} border-amber-700 text-amber-300`;\r\n  return `${base} border-rose-700 text-rose-300`;\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}