{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnd/OneDrive/Desktop/Folders/Web%20Dev%20Stuff/CinemaBooker/cinema-booker/src/app/api/movies/route.js"],"sourcesContent":["import { MongoClient } from 'mongodb';\r\n\r\nconst uri = \"mongodb+srv://parkertheoutlaw_db_user:FC6qKAalpje0bIUU@cluster0.levqaeh.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0\";\r\n\r\nlet client;\r\nlet db;\r\n\r\nasync function connectToDatabase() {\r\n    if (db) {\r\n        return { db };\r\n    }\r\n\r\n    client = new MongoClient(uri);\r\n    await client.connect();\r\n    db = client.db('MoviesDatabase');\r\n\r\n    return { db };\r\n}\r\n\r\nexport async function GET() {\r\n    try {\r\n        const { db } = await connectToDatabase();\r\n        const moviesCollection = db.collection('MoviesCollection');\r\n\r\n        const movies = await moviesCollection.find({}).toArray();\r\n\r\n        const formattedMovies = movies.map(movie => ({\r\n            _id: movie._id,\r\n            title: movie.title,\r\n            genre: movie.genre,\r\n            posterUrl: movie.png,\r\n            director: movie.director,\r\n            cast: movie.Cast,\r\n            rating: movie.Rating,\r\n            runTime: movie.RunTime,\r\n            trailer: movie.trailer,\r\n            isCurrentlyRunning: movie.isCurrentlyRunning,\r\n        }));\r\n\r\n        return new Response(JSON.stringify(formattedMovies), {\r\n            status: 200,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        });\r\n\r\n    } catch (error) {\r\n        console.error(\"Failed to fetch movies:\", error);\r\n        return new Response(JSON.stringify({ message: \"An error occurred.\", error: error.message }), {\r\n            status: 500,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        });\r\n    }\r\n}"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM;AAEZ,IAAI;AACJ,IAAI;AAEJ,eAAe;IACX,IAAI,IAAI;QACJ,OAAO;YAAE;QAAG;IAChB;IAEA,SAAS,IAAI,sHAAW,CAAC;IACzB,MAAM,OAAO,OAAO;IACpB,KAAK,OAAO,EAAE,CAAC;IAEf,OAAO;QAAE;IAAG;AAChB;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,mBAAmB,GAAG,UAAU,CAAC;QAEvC,MAAM,SAAS,MAAM,iBAAiB,IAAI,CAAC,CAAC,GAAG,OAAO;QAEtD,MAAM,kBAAkB,OAAO,GAAG,CAAC,CAAA,QAAS,CAAC;gBACzC,KAAK,MAAM,GAAG;gBACd,OAAO,MAAM,KAAK;gBAClB,OAAO,MAAM,KAAK;gBAClB,WAAW,MAAM,GAAG;gBACpB,UAAU,MAAM,QAAQ;gBACxB,MAAM,MAAM,IAAI;gBAChB,QAAQ,MAAM,MAAM;gBACpB,SAAS,MAAM,OAAO;gBACtB,SAAS,MAAM,OAAO;gBACtB,oBAAoB,MAAM,kBAAkB;YAChD,CAAC;QAED,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,kBAAkB;YACjD,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;QACJ;IAEJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,SAAS;YAAsB,OAAO,MAAM,OAAO;QAAC,IAAI;YACzF,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;QACJ;IACJ;AACJ","debugId":null}}]
}