{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 9, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/CinemaBooker/cinema-booker/src/app/components/topbar.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"button\": \"topbar-module__MebPBq__button\",\n  \"buttonText\": \"topbar-module__MebPBq__buttonText\",\n  \"dropdownMenu\": \"topbar-module__MebPBq__dropdownMenu\",\n  \"dropdownMenuButtons\": \"topbar-module__MebPBq__dropdownMenuButtons\",\n  \"dropdownMenuContainer\": \"topbar-module__MebPBq__dropdownMenuContainer\",\n  \"icon\": \"topbar-module__MebPBq__icon\",\n  \"loginButton\": \"topbar-module__MebPBq__loginButton\",\n  \"mainHeading\": \"topbar-module__MebPBq__mainHeading\",\n  \"registerButton\": \"topbar-module__MebPBq__registerButton\",\n  \"slideDown\": \"topbar-module__MebPBq__slideDown\",\n  \"topBar\": \"topbar-module__MebPBq__topBar\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnd/OneDrive/Desktop/Folders/Web%20Dev%20Stuff/CinemaBooker/cinema-booker/src/app/components/TopBar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faHouse, faUser } from \"@fortawesome/free-solid-svg-icons\";\r\nimport styles from \"./topbar.module.css\"\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { useSession, signOut } from 'next-auth/react';\r\n\r\nexport default function TopBar() {\r\n  const router = useRouter();\r\n  const { data: session, status } = useSession();\r\n\r\n  // useRef (and other below items) used for the positioning of the profile icon dropdown\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [position, setPosition] = useState<{ top: number; left: number }>({ top: 0, left: 0 });\r\n  const buttonRef = useRef<HTMLButtonElement | null>(null);\r\n  const menuRef = useRef<HTMLDivElement | null>(null);\r\n  const isAdmin = session?.user?.userType === \"ADMIN\";\r\n\r\n  //**NOTE**: Using session status to control dynamic rendering of profile icon vs login button\r\n\r\n  //Navigate to Home Page\r\n  const homeHandler = () => {\r\n    router.push('/');\r\n  };\r\n\r\n  //Navigate to Login Page\r\n  const loginHandler = () => {\r\n    router.push('/login')\r\n  }\r\n\r\n  //Navigate to Login Page\r\n  const registerHandler = () => {\r\n    router.push('/register')\r\n  }\r\n\r\n  //Handler for Profile Button, toggles visibility of dropdown menu.\r\n  const toggleUserMenu = () => {\r\n    if (buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect();\r\n      setPosition({\r\n        top: rect.bottom + window.scrollY, // below the button\r\n        left: rect.left + window.scrollX + 8,\r\n      });\r\n    }\r\n    setIsExpanded((prev) => !prev);\r\n  };\r\n\r\n\r\n  //**NOTE**: Edit this handler to log the user out.\r\n  const logoutHandler = () => {\r\n    console.log(\"Logout Clicked!\")\r\n    signOut();\r\n    // globalThis.location.reload();\r\n  }\r\n\r\n  const adminPageHandler = () => {\r\n    router.push('/admin');\r\n  }\r\n\r\n  //**NOTE**: Edit the URL of this to reflect the User ID of the currently logged-in user.\r\n  const editProfileHandler = () => {\r\n    console.log('Edit Profile clicked. Session:', session);\r\n    console.log('User ID:', session?.user?.id);\r\n    if (session?.user?.id) {\r\n      const profileUrl = `/user/${session.user.id}/profile/edit`;\r\n      console.log('Navigating to:', profileUrl);\r\n      router.push(profileUrl);\r\n    } else {\r\n      console.log('No session or user ID, redirecting to login');\r\n    }\r\n  }\r\n\r\n  //If the user clicks outside of the menu, this useEffect handle closes the menu\r\n  useEffect(() => {\r\n    const handleOutsideClick = (e: MouseEvent) => {\r\n      if (\r\n        buttonRef.current &&\r\n        menuRef.current &&\r\n        !buttonRef.current.contains(e.target as Node) &&\r\n        !menuRef.current.contains(e.target as Node)\r\n      ) {\r\n        setIsExpanded(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleOutsideClick);\r\n    return () => document.removeEventListener(\"mousedown\", handleOutsideClick);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.topBar}>\r\n      <button className={styles.button} onClick={homeHandler}>\r\n        <FontAwesomeIcon className={styles.icon} icon={faHouse} />\r\n        <p className={styles.buttonText}>Home</p>\r\n      </button>\r\n      <h2 className={styles.mainHeading}>Cinema E-Booking Site</h2>\r\n      {/* {isLoggedIn ? ( */}\r\n      {status === \"authenticated\" && session?.user && (\r\n        <button className={styles.button} onClick={toggleUserMenu} ref={buttonRef} id='buttonID'>\r\n          <FontAwesomeIcon className={styles.icon} icon={faUser} />\r\n          <p className={styles.buttonText}>Profile</p>\r\n        </button>\r\n      )}\r\n      {status === \"unauthenticated\" && (\r\n        <div>\r\n        <button className={styles.registerButton} onClick={registerHandler} ref={buttonRef} id='buttonID'>\r\n          <p className={styles.buttonText}>Register</p>\r\n        </button>\r\n        <button className={styles.loginButton} onClick={loginHandler} ref={buttonRef} id='buttonID'>\r\n          <p className={styles.buttonText}>Login</p>\r\n        </button>\r\n        </div>\r\n        )}\r\n      {status === \"loading\" && (\r\n        <p>Loading session...</p>\r\n      )}\r\n      {isExpanded && (\r\n        <div\r\n          className={styles.dropdownMenu}\r\n          style={{ top: position.top, left: position.left }}\r\n          ref={menuRef}\r\n        >\r\n          <ul className={styles.dropdownMenuContainer}>\r\n            {isAdmin && (<button className={styles.dropdownMenuButtons} onClick={adminPageHandler}>\r\n              <p>Admin Controls</p>\r\n            </button>)}\r\n            <button className={styles.dropdownMenuButtons} onClick={editProfileHandler}>\r\n              <p>Edit Profile</p>\r\n            </button>\r\n            <button className={styles.dropdownMenuButtons} onClick={logoutHandler}>\r\n              <p>Logout</p>\r\n            </button>\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 323, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnd/OneDrive/Desktop/Folders/Web%20Dev%20Stuff/CinemaBooker/cinema-booker/src/app/components/providers.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { SessionProvider } from \"next-auth/react\";\r\nimport React from \"react\";\r\n\r\nexport default function Providers({ children }: { children: React.ReactNode }) {\r\n    return <SessionProvider>{children}</SessionProvider>;\r\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKe,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACzE,qBAAO,kRAAC,qMAAe;kBAAE;;;;;;AAC7B","debugId":null}}]
}