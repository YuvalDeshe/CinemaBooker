{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/CinemaBooker/cinema-booker/src/app/movie/[id]/styles.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"buttonText\": \"styles-module__8hwUrq__buttonText\",\n  \"buttonsContainer\": \"styles-module__8hwUrq__buttonsContainer\",\n  \"description\": \"styles-module__8hwUrq__description\",\n  \"homeButton\": \"styles-module__8hwUrq__homeButton\",\n  \"hr\": \"styles-module__8hwUrq__hr\",\n  \"icon\": \"styles-module__8hwUrq__icon\",\n  \"mainDiv\": \"styles-module__8hwUrq__mainDiv\",\n  \"mainHeading\": \"styles-module__8hwUrq__mainHeading\",\n  \"movieInfo\": \"styles-module__8hwUrq__movieInfo\",\n  \"movieInfoItems\": \"styles-module__8hwUrq__movieInfoItems\",\n  \"moviePoster\": \"styles-module__8hwUrq__moviePoster\",\n  \"movieTitle\": \"styles-module__8hwUrq__movieTitle\",\n  \"primaryMovieDiv\": \"styles-module__8hwUrq__primaryMovieDiv\",\n  \"showTimeButtons\": \"styles-module__8hwUrq__showTimeButtons\",\n  \"subSectionHeading\": \"styles-module__8hwUrq__subSectionHeading\",\n  \"subSectionItems\": \"styles-module__8hwUrq__subSectionItems\",\n  \"tempButtonCSS\": \"styles-module__8hwUrq__tempButtonCSS\",\n  \"topBar\": \"styles-module__8hwUrq__topBar\",\n  \"trailer\": \"styles-module__8hwUrq__trailer\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnd/OneDrive/Desktop/Folders/Web%20Dev%20Stuff/CinemaBooker/cinema-booker/src/app/movie/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Movie from \"@/app/components/Movie\";\r\nimport React from \"react\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faHouse } from \"@fortawesome/free-solid-svg-icons\";\r\nimport styles from \"./styles.module.css\"\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport Link from \"next/link\";\r\nimport TopBar from \"@/app/components/TopBar\";\r\n\r\n\r\n//Array of hardcoded showtimes, loaded into the page dynamically.\r\nconst SHOWTIMES = [\"9:00 a.m.\", \"12:00 p.m.\", \"3:00 p.m.\", \"6:00 p.m.\", \"9:00 p.m.\"]\r\n\r\n//This is the defined movie type, which has all the info we talked about Tuesday night.\r\ntype Movie = {\r\n  title: string;\r\n  genre: string; //Maybe we could make this an enum or something, but not required.\r\n  description: string;\r\n  posterUrl: string;\r\n  trailerLink: string;\r\n  director: string;\r\n  castList: string[]; //Idk what this data type will be, but Im assuming a String array for now.\r\n  rating: string; //also could be an enum\r\n  runTime: string;\r\n  isCurrentlyRunning: boolean;\r\n  _id: string;\r\n}\r\n\r\n\r\n\r\nexport default function MoviePage() {\r\n  const { id } = useParams();\r\n  const router = useRouter();\r\n  const { data: session } = useSession();\r\n  const [movie, setMovie] = React.useState<Movie | null>(null);\r\n\r\n  React.useEffect(() => { \r\n    if (!id) return;\r\n    fetch(`/api/movies/${id}`)\r\n      .then(res => res.json())\r\n      .then(data => setMovie(data));\r\n  }, [id]);\r\n\r\n  if (!movie) return <div className={styles.mainDiv}>Loading...</div>;\r\n\r\n  //array of cast members to string\r\n  let actorsList: string = \"\";\r\n  if (Array.isArray(movie.castList)) {\r\n    actorsList = movie.castList.join(\", \");\r\n  } else if (typeof movie.castList === \"string\") {\r\n    actorsList = movie.castList;\r\n  }\r\n\r\n  // embedded links # fixed error issue with db\r\n  let embedLink: string = \"\";\r\n  if (movie.trailerLink && typeof movie.trailerLink === \"string\") {\r\n    const lastEq = movie.trailerLink.lastIndexOf(\"=\");\r\n    embedLink =\r\n      \"https://www.youtube.com/embed/\" +\r\n      (lastEq !== -1\r\n        ? movie.trailerLink.substring(lastEq + 1)\r\n        : movie.trailerLink);\r\n  }\r\n\r\n\r\n  const returnHandler = () => {\r\n    router.push('/');\r\n  };\r\n\r\n  const goToBooking = (timeLabel: string) => {\r\n    if (!session) {\r\n      // Redirect to login with a return URL\r\n      router.push(`/login?redirect=/movie/${id}/booking&time=${encodeURIComponent(timeLabel)}`);\r\n      return;\r\n    }\r\n    \r\n    if (session.user && !session.user.isEmailVerified) {\r\n      // Show message about email verification\r\n      alert(\"Please verify your email address before booking tickets. Check your inbox for a verification email.\");\r\n      return;\r\n    }\r\n    \r\n    // Proceed to booking\r\n    router.push(`/movie/${id}/booking?time=${encodeURIComponent(timeLabel)}`);\r\n  };\r\n\r\n\r\n  return (\r\n    <div className={styles.mainDiv}>\r\n      <h1 className={styles.movieTitle}>{movie.title}</h1>\r\n      <div className={styles.primaryMovieDiv}>\r\n        <img className={styles.moviePoster} src={movie.posterUrl}></img>\r\n        <iframe className={styles.trailer}\r\n          src= {embedLink}\r\n          title=\"YouTube video player\"\r\n          // style border\r\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" \r\n          allowFullScreen>\r\n        </iframe>\r\n      </div>\r\n      <div className={styles.movieInfo}>\r\n        <p className={styles.movieInfoItems}>{movie.runTime}</p>\r\n        <p className={styles.movieInfoItems}>|</p>\r\n        <p className={styles.movieInfoItems}>{movie.genre}</p>\r\n        <p className={styles.movieInfoItems}>|</p>\r\n        <p className={styles.movieInfoItems}>{movie.rating}</p>\r\n      </div>\r\n      <p className={styles.description}>{movie.description}</p>\r\n      <hr className={styles.hr}/>\r\n      <h3 className={styles.subSectionHeading}>Director:</h3>\r\n      <p className={styles.subSectionItems}>{movie.director}</p>\r\n      <hr className={styles.hr}/>\r\n      <h3 className={styles.subSectionHeading}>Cast:</h3>\r\n      <p className={styles.subSectionItems}>{actorsList}</p>\r\n      <hr className={styles.hr}/>\r\n      <h3 className={styles.subSectionHeading}>Showtimes:</h3>\r\n      {!session && movie.isCurrentlyRunning && (\r\n        <p className={styles.subSectionItems} style={{marginBottom: '10px', color: '#fbbf24'}}>\r\n          Sign in to book tickets for these showtimes:\r\n        </p>\r\n      )}\r\n      {movie.isCurrentlyRunning && (\r\n        <div className={styles.buttonsContainer}>\r\n          {SHOWTIMES.map((value, index) =>(\r\n            <button\r\n              className={styles.showTimeButtons}\r\n              onClick={() => goToBooking(value)}\r\n              key={index}\r\n            >\r\n              {value}\r\n              {!session && <span style={{fontSize: '10px', display: 'block'}}>Sign in to book</span>}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {!movie.isCurrentlyRunning && (\r\n        <p className={styles.subSectionItems}>Showtimes will be available when the movie is running.</p>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}