{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///Users/nizar/Desktop/software_eng/CinemaBooker/cinema-booker/src/app/api/movies/route.js"],"sourcesContent":["import { MongoClient } from 'mongodb';\n\nconst uri = \"mongodb+srv://parkertheoutlaw_db_user:FC6qKAalpje0bIUU@cluster0.levqaeh.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0\";\nconst client = new MongoClient(uri);\n\nexport async function GET() {\n    try {\n        await client.connect();\n        const db = client.db('MoviesDatabase');\n        const moviesCollection = db.collection('MoviesCollection');\n\n        const movies = await moviesCollection.find({}).toArray();\n\n        const formattedMovies = movies.map(movie => ({\n            title: movie.title,\n            genre: Array.isArray(movie.genre)\n                ? movie.genre.map(g => g.trim())\n                : (typeof movie.genre === 'string' && movie.genre.includes(',')\n                    ? movie.genre.split(',').map(g => g.trim())\n                    : [movie.genre]),\n            posterUrl: movie.png,\n            director: movie.director,\n            cast: movie.Cast,\n            rating: movie.Rating,\n            runTime: movie.RunTime,\n            trailer: movie.trailer,\n            isCurrentlyRunning: movie.isCurrentlyRunning === 'True',\n        }));\n\n        return new Response(JSON.stringify(formattedMovies), {\n            status: 200,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        });\n\n    } catch (error) {\n        console.error(\"Failed to fetch movies:\", error);\n        return new Response(JSON.stringify({ message: \"An error occurred.\", error: error.message }), {\n            status: 500,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        });\n    } finally {\n        await client.close();\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA,MAAM,MAAM;AACZ,MAAM,SAAS,IAAI,YAAY;AAExB,eAAe;IAClB,IAAI;QACA,MAAM,OAAO,OAAO;QACpB,MAAM,KAAK,OAAO,EAAE,CAAC;QACrB,MAAM,mBAAmB,GAAG,UAAU,CAAC;QAEvC,MAAM,SAAS,MAAM,iBAAiB,IAAI,CAAC,CAAC,GAAG,OAAO;QAEtD,MAAM,kBAAkB,OAAO,GAAG,CAAC,CAAA,QAAS,CAAC;gBACzC,OAAO,MAAM,KAAK;gBAClB,OAAO,MAAM,OAAO,CAAC,MAAM,KAAK,IAC1B,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,MAC1B,OAAO,MAAM,KAAK,KAAK,YAAY,MAAM,KAAK,CAAC,QAAQ,CAAC,OACrD,MAAM,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,MACtC;oBAAC,MAAM,KAAK;iBAAC;gBACvB,WAAW,MAAM,GAAG;gBACpB,UAAU,MAAM,QAAQ;gBACxB,MAAM,MAAM,IAAI;gBAChB,QAAQ,MAAM,MAAM;gBACpB,SAAS,MAAM,OAAO;gBACtB,SAAS,MAAM,OAAO;gBACtB,oBAAoB,MAAM,kBAAkB,KAAK;YACrD,CAAC;QAED,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,kBAAkB;YACjD,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;QACJ;IAEJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,SAAS;YAAsB,OAAO,MAAM,OAAO;QAAC,IAAI;YACzF,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;QACJ;IACJ,SAAU;QACN,MAAM,OAAO,KAAK;IACtB;AACJ","debugId":null}}]
}